### 캐시란?
데이터의 원래 소스보다 더 빠르고 효율적으로 액세스할 수 있는 임시 데이터 저장소

### 캐시의 조건
1. 원본 보다 빠른 접근 속도
2. 같은 데이터 반복적 액세스
3. 잘 변하지 않는 데이터

### 레디스 캐시 특징
1. 사용이 간편함
2. 단순한 key-value 구조
3. in-memory 데이터 저장소(RAM) → 굉장히 빠름
4. 빠른 성능

### 캐시 전략

#### 읽기 전략

- Look-Aside(Lazy Loading)
    - Cache Hit : 캐시에 데이터가 존재하면 캐시에 있는 데이터를 가져옴
    - Cache Miss : 캐시에 데이터가 존재하지 않으면 db 에서 데이터를 가져와서 캐시에 저장
    - 장점: 레디스가 다운되더라도 바로 장애로 이어지지 않고 db 에서 데이터를 가져올 수 있음
    - 단점
        - 캐시 커넥션이 많았다면 커넥션이 모두 데이터 베이스로 붙어서 db에 갑자기 많은 부하가 몰릴 수 있음
        - 맨 처음 db에만 데이터가 존재한다면, Cache Miss가 많이 발생하여 성능 저하가 발생할 수 있음

          → Cache Warming

- Read-Through
  캐시에서만 데이터를 읽어오는 전략
    - Cache Hit : 캐시에 데이터가 존재하면 캐시에 있는 데이터를 가져옴
    - Cache Miss : 캐시에 데이터가 존재하지 않으면 캐시에서 db 에 데이터를 조회하여 자체 업데이트 후 캐시에서 데이터를 가져옴
    - 장점: 서버의 데이터베이스 접근 회수가 줄어듬
    - 단점: 캐시가 다운될 경우 서비스 이용에 차질이 생김

#### 쓰기 전략
- Write-Back
  캐시에 데이터를 모아 일정 주기 배치 작업을 통해 db에 반영
    - 장점
        - 동기화 작업이 비동기로 처리되기 때문에 빠른 응답시간을 보장
        - 쓰기 쿼리 회수 비용과 부하를 줄일 수 있음
    - 단점
        - 자주 사용되지 않는 불필요한 데이터가 저장됨
        - 캐시에서 오류가 발생하면 데이터를 영구 소실할 수 있음

- Write-Around
  db에만 데이터를 저장하고 cache miss 가 발생했을 때만 캐시에 db에 있는 데이터를 끌어옴
    - 장점 : 속도가 빠름
    - 단점 : db와 캐시의 정합성 문제가 발생

- Write-Through
  캐시에 데이터를 저장하고 캐시에서 db에 데이터를 저장

    - 장점 : 캐시는 항상 최신 정보를 갖고 있게됨
    - 단점 : 저장할때마다 2개의 과정 필요하고 무조건 데이터를 캐시에 저장하다보니 재사용 가능성이 없는 데이터도 저장하게됨 → 리소스 낭비 → TTL을 설정해주면 좋음
  
# Local Cache vs Global Cache

## Local Cache
- 개별 서버에 존재
- 다른 서버의 캐시를 참조하기 어려움
- 서버 내에서 동작하기 때문에 빠른 속도
- 로컬 서버의 리소스(Memory, Disk) 사용
- 분산 서버 환경일 경우, 캐시에 있는 데이터가 변경될 때 해당 서버를 제외한 다른 서버에게 변경 사항 전달 필요

## Global Cache
- 여러 서버에서 분리된 캐시에 접근
- 서버 간 데이터 공유 가능
- 네트워크를 사용하기 때문에 Local Cache 보다 느릴 수 있음
- Replication, Sharding 등을 통한 캐시 서버 확장 가능